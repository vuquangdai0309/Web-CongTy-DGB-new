{{> header}}
<div class="container-fluid bg-primary py-5 bg-header" style="margin-bottom: 50px;">
    <div class="row py-5">
        <div class="col-12 pt-lg-5 mt-lg-5 text-center">
            <h1 class="display-4 text-white animated zoomIn">Tìm Kiếm</h1>
            <a href="/" class="h5 text-white">Trang chủ</a>
            <i class="far fa-circle text-white px-2"></i>
            <a class="h5 text-white">Tìm kiếm</a>
        </div>
    </div>
</div>

<div class="container-fluid  wow fadeInUp" data-wow-delay="0.1s">
    <div class="container py-5">
        <div class="section-title text-center position-relative pb-3 mb-5 mx-auto" style="max-width: 600px;">
            <h5 class="fw-bold text-primary text-uppercase">Danh sách kết quả tìm kiếm</h5>

        </div>
        <div class="row g-5">
            {{#if data}}
            {{#each data}}
            <div class="col-lg-4 wow slideInUp" data-wow-delay="0.3s">
                <div class="team-item bg-light rounded overflow-hidden">
                    <div class="team-img position-relative overflow-hidden" style="height: 267px;">
                        <img class="img-fluid w-100 h-100" src="/{{this.image}}" alt="" style="object-fit: cover;">
                        <div class="team-social">
                            <a class="btn btn-lg btn-primary btn-lg-square rounded" href="/bai-viet/{{this.slug}}"><i
                                    class="fas fa-search"></i></a>
                        </div>
                    </div>
                    <div class="text-center py-4">
                        <h4 class="text-primary">{{this.title}}</h4>
                        <p class="text-uppercase m-0">Ngày tạo: {{this.createdAt}}</p>
                    </div>
                </div>
            </div>
            {{/each}}
            <div class="col-lg-12 center">
                <div class="">
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            {{#if pagination.prev}}
                            <li class="page-item">
                                <a class="page-link" onclick="changePage({{pagination.prev}})" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            {{/if}}
                            {{#each pagination.pages as |page|}}
                            {{#if page.active}}
                            <li class="page-item active">
                                <a class="page-link" onclick="changePage({{this.number}})">{{this.number}}</a>
                            </li>
                            {{else if page.isDots }}

                            {{else}}
                            <li class="page-item ">
                                <a class="page-link" onclick="changePage({{this.number}})">{{this.number}}</a>
                            </li>
                            {{/if}}
                            {{/each}}

                            {{#if pagination.next}}
                            <li class="page-item">
                                <a class="page-link" onclick="changePage({{pagination.next}})" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                            {{/if}}
                        </ul>
                    </nav>
                </div>
            </div>
            {{/if}}
            {{#unless data}}
            <div class="row mt-5">
                <div class="col-md-6 ">
                    <br>
                    <br>
                    <h4><strong>Không tìm thấy!</strong></h4>
                    <p>Chúng tôi không tìm thấy từ khóa phù hợp với yêu cầu của bạn. Vui lòng nhập từ khóa khác.
                    </p>
                </div>
                <span class="col-md-6 "><i class="bi bi-emoji-frown" style="font-size:200px;float:right"></i></span>

            </div>
            {{/unless}}
        </div>
    </div>
</div>

{{> footer}}
<script>
    function changePage(page) {
        const searchTerm = document.getElementById('paginationForm').search.value = '{{searchTerm}}';
        window.location.href = `/tim-kiem?page=${page}&search=${searchTerm}`;
    }
</script>